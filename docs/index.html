<!DOCTYPE html> <html lang="EN"> <head> <meta charset="utf-8"> <title>Simple Inferiors</title> <style>html body{margin:0 auto 0 auto;padding:20px;max-width:1024px;font-family:sans-serif;font-size:14pt;overflow-y:scroll;}html body a{text-decoration:none;}html body a[href]{color:#0055AA;}html body a[href]:hover{color:#0088EE;}html body pre{background:#FAFAFA;border:1px solid #DDDDDD;padding:0.75em;overflow-x:auto;}html body pre >code a[href]{color:#223388;}article.project h1{font-size:1.7em;}article.project h1,article.project h2,article.project h3,article.project h4,article.project h5,article.project h6{margin:0.2em 0 0.1em 0;text-indent:1em;}article.project >header{text-align:center;}article.project >header img.logo{display:block;margin:auto;max-height:170px;}article.project >header h1{display:inline-block;text-indent:0;font-size:2.5em;}article.project >header .version{vertical-align:bottom;}article.project >header .languages{margin-top:-0.5em;text-transform:capitalize;}article.project >header .description{margin:0;}article.project >header .pages{margin-top:0.5em;font-size:1.2em;text-transform:capitalize;}article.project >header .pages a{display:inline-block;padding:0 0.2em;}article.project >section{margin:1em 0 1em 0;}article.project >section img{max-width:100%;}article.project #index >ul{list-style:none;margin:0;padding:0;}article.project .row label{display:inline-block;min-width:8em;}article.project #system .row{display:flex;}article.project #system #dependencies{display:inline;margin:0;padding:0;}article.project #system #dependencies li{display:inline;padding:0 0.2em;}article.project #system #author label{vertical-align:top;}article.project #system #author ul{display:inline-block;margin:0;padding:0;list-style:none;}article.project #toc nav>*{margin-left:1em;display:block;}article.definition{margin:1em 0 0 0;}article.definition >header h1,article.definition >header h2,article.definition >header h3,article.definition >header h4,article.definition >header h5,article.definition >header h6{text-indent:0;display:inline-block;}article.definition >header ul{display:inline-block;list-style:none;margin:0;padding:0;}article.definition >header ul li{display:inline-block;padding:0 0.2em 0 0;}article.definition >header .visibility{display:none;}article.definition >header .visibility,article.definition >header .type{text-transform:lowercase;}article.definition >header .source-link{visibility:hidden;float:right;}article.definition >header .source-link:after{visibility:visible;content:"[SRC]";}article.definition .docstring{margin:0 0 0 1em;}article.definition .docstring pre{font-size:0.8em;white-space:pre-wrap;}.definition.package >header ul.nicknames{display:inline-block;list-style:none;margin:0;padding:0 0 0 1em;}.definition.package >header ul.nicknames li{display:inline;}.definition.package >header ul.nicknames:before{content:"(";}.definition.package >header ul.nicknames:after{content:")";}.definition.package ul.definitions{margin:0;list-style:none;padding:0 0 0 0.5em;}.definition.callable >header .name:before,.definition.type >header .name:before{content:"(";font-weight:normal;}.definition.callable >header .arguments:after,.definition.type >header .arguments:after{content:")";}.definition.callable >header .arguments .arguments:before,.definition.type >header .arguments .arguments:before{content:"(";}.definition.callable >header .arguments .argument,.definition.type >header .arguments .argument{padding:0;}.definition.callable >header .arguments .argument.lambda-list-keyword,.definition.type >header .arguments .argument.lambda-list-keyword{color:#991155;}.definition li>mark{background:none;border-left:0.3em solid #0088EE;padding-left:0.3em;display:block;}@media (min-width: 1300px){html body{padding-left:16em;}article.project #toc{margin:0;position:fixed;left:0;top:0;bottom:0;width:15em;overflow-y:auto;background:#F0F0F0;border-right:1px solid #A0A0A0;}}</style> </head> <body> <article class="project"> <header>   <h1>simple inferiors</h1>   <span class="version">1.1.0</span>    <p class="description">A very simple library to use inferior processes.</p>   </header> <section id="toc"> <h2>Table of Contents</h2> <nav> <a href="#project">Top</a>  <a href="#documentation">Documentation</a> <nav> <a href="#about_simple-inferiors">About Simple-Inferiors</a>  <a href="#how_to">How To</a> </nav>  <a href="#system">System</a>  <a href="#system">Packages</a> <nav> <a href="#PACKAGE%20SIMPLE-INFERIORS">SIMPLE-INFERIORS</a> </nav>  </nav> </section>  <section id="documentation"><h2 id="about_simple-inferiors">About Simple-Inferiors</h2> <p>This is a library to allow easy handling of external processes, and primarily to get their output. It handles proper copying of stdout and stderr of the process simultaneously, both in a sequential and parallel fashion. It also features a lazy directory switching mechanism, to avoid running into parallelism problems when having to <code>chdir</code>.</p> <h2 id="how_to">How To</h2> <p>Load simple-inferiors with ASDF or Quicklisp</p> <pre><code>(ql:quickload :simple-inferiors)
</code></pre> <p>Run a program!</p> <pre><code>(<a href="#FUNCTION%20SIMPLE-INFERIORS%3ARUN" class="xref">simple-inferiors:run</a> &quot;bash&quot; '(&quot;-c&quot; &quot;for i in `seq 1 10`; do echo $i; done&quot;))
</code></pre> <p>Not very exciting. By default the output is discarded and you only get the exit code. Let's see what it says:</p> <pre><code>(<a href="#FUNCTION%20SIMPLE-INFERIORS%3ARUN" class="xref">simple-inferiors:run</a> &quot;bash&quot; '(&quot;-c&quot; &quot;for i in `seq 1 10`; do echo $i; done&quot;)
                      :output T)
</code></pre> <p>By default the streams will be copied character by character. This allows the most immediate fetching of the output from the process, at the cost of being very CPU intensive. If you can afford it, you may want to switch to a more efficient method, such as copying line by line:</p> <pre><code>(<a href="#FUNCTION%20SIMPLE-INFERIORS%3ARUN" class="xref">simple-inferiors:run</a> &quot;bash&quot; '(&quot;-c&quot; &quot;for i in `seq 1 10`; do echo $i; done&quot;)
                      :output T :copier :line)
</code></pre> <p>The output actually doesn't change for this tiny test case, but the performance can be radically different for larger outputs. You may also pass a number to specify a custom buffer size, or a function to handle the stream copying yourself.</p> <p>When the stack is unwound, simple-inferiors tries to terminate the external process. By default it will try to ask the process to terminate with 0.1 second delays and then it will try to kill it if it still hasn't terminated. In order to control this stopping, you must supply a different handler to <code><a href="#FUNCTION%20SIMPLE-INFERIORS%3ARUN" class="xref">run</a></code>.</p> <pre><code>(<a href="#FUNCTION%20SIMPLE-INFERIORS%3ARUN" class="xref">simple-inferiors:run</a> &quot;bash&quot; '(&quot;-c&quot; &quot;sleep 60&quot;) 
                      :handler (lambda (c p oi oo ei eo) 
                                 (<a href="#FUNCTION%20SIMPLE-INFERIORS%3AHANDLE-PROCESS-SEQUENTIAL" class="xref">simple-inferiors:handle-process-sequential</a> c p oi oo ei eo :stop-attempts 100)))
</code></pre> <p>You may also use <code><a href="#FUNCTION%20SIMPLE-INFERIORS%3AHANDLE-PROCESS-PARALLEL" class="xref">handle-process-parallel</a></code> if you would like to use threads to handle the stdout and stderr of the process instead of attempting to read both simultaneously sequentially, or provide your own handler function entirely.</p> <p>If you need to handle different directories for your process, you can use <code><a href="#MACRO-FUNCTION%20SIMPLE-INFERIORS%3AWITH-CHDIR" class="xref">with-chdir</a></code>. Note that <code><a href="#MACRO-FUNCTION%20SIMPLE-INFERIORS%3AWITH-CHDIR" class="xref">with-chdir</a></code> does not actually perform a <code>chdir</code> and instead rebinds <code><a href="#VARIABLE%20SIMPLE-INFERIORS%3A%2ACWD%2A" class="xref">*cwd*</a></code>. The <code>chdir</code> is only performed (if at all necessary) at the very last stage when a process is run. This avoids clashing if parallelism is involved. <code><a href="#MACRO-FUNCTION%20SIMPLE-INFERIORS%3AWITH-CHDIR" class="xref">with-chdir</a></code> merges the passed location (resolved by <code><a href="#GENERIC-FUNCTION%20SIMPLE-INFERIORS%3ALOCATION" class="xref">location</a></code>) with the current <code><a href="#VARIABLE%20SIMPLE-INFERIORS%3A%2ACWD%2A" class="xref">*cwd*</a></code>. If <code><a href="#VARIABLE%20SIMPLE-INFERIORS%3A%2ACWD%2A" class="xref">*cwd*</a></code> is <code>NIL</code> (such as at the very beginning), the <code>cwd</code> is used to merge the path. If you need to absolutely definitely perform a <code>chdir</code>, you may use <code><a href="#MACRO-FUNCTION%20SIMPLE-INFERIORS%3AWITH-EXCHDIR" class="xref">with-exchdir</a></code>. Note that it will signal an <code><a href="#CONDITION%20SIMPLE-INFERIORS%3AINVALID-LOCATION-ERROR" class="xref">invalid-location-error</a></code> if changing directory to an inexistent location is attempted.</p> </section>    <section id="system"> <h2>System Information</h2>  <div class="row"> <label for="version">Version:</label> <a id="version">1.1.0</a> </div>   <div class="row"> <label for="dependencies">Dependencies:</label> <ul id="dependencies"><li><a class="external">uiop</a></li><li><a class="external">bordeaux-threads</a></li><li><a class="external" href="https://Shinmera.github.io/documentation-utils/">documentation-utils</a></li></ul> </div>   <div class="row" id="author"> <label for="author">Author:</label> <a href="mailto:shinmera@tymoon.eu">Yukari Hafner</a> </div>   <div class="row"> <label for="license">License:</label> <a id="license" href="https://github.com/Shinmera/simple-inferiors/blob/056ee771657112e79059b083a964d195976bb0b5/LICENSE">zlib</a> </div>   <div class="row"> <label for="homepage">Homepage:</label> <a id="homepage" href="https://Shinmera.github.io/simple-inferiors/">https://Shinmera.github.io/simple-inferiors/</a> </div>   <div class="row"> <label for="bug-tracker">Bug Tracker:</label> <a id="bug-tracker" href="https://github.com/Shinmera/simple-inferiors/issues">https://github.com/Shinmera/simple-inferiors/issues</a> </div>   <div class="row"> <label for="sources">Sources:</label> <a id="sources" href="https://github.com/Shinmera/simple-inferiors.git">https://github.com/Shinmera/simple-inferiors.git</a> </div>  </section>    <section id="index"> <h2>Definition Index</h2> <ul> <li> <article class="definition package" id="PACKAGE SIMPLE-INFERIORS"> <header> <h3> <a href="#PACKAGE%20SIMPLE-INFERIORS">SIMPLE-INFERIORS</a> </h3> <ul class="nicknames"> <li>ORG.SHIRAKUMO.SIMPLE-INFERIORS</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> <ul class="definitions"> <li> <article class="definition special-variable" id="VARIABLE SIMPLE-INFERIORS:*CWD*"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SPECIAL-VARIABLE</span> <h4 class="name"> <a href="#VARIABLE%20SIMPLE-INFERIORS%3A%2ACWD%2A">*CWD*</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-inferiors/blob/056ee771657112e79059b083a964d195976bb0b5/process.lisp#L3">Source</a>  </header> <div class="docstring"><pre>The variable containing the current directory, virtually.
This variable is only resolved once needed, such as when using WITH-EXCHDIR.

See <a href="#MACRO-FUNCTION%20SIMPLE-INFERIORS%3AWITH-CHDIR" class="xref">WITH-CHDIR</a>
See <a href="#MACRO-FUNCTION%20SIMPLE-INFERIORS%3AWITH-EXCHDIR" class="xref">WITH-EXCHDIR</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION SIMPLE-INFERIORS:INFERIOR-PROCESS-FAILED-ERROR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20SIMPLE-INFERIORS%3AINFERIOR-PROCESS-FAILED-ERROR">INFERIOR-PROCESS-FAILED-ERROR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-inferiors/blob/056ee771657112e79059b083a964d195976bb0b5/process.lisp#L166">Source</a>  </header> <div class="docstring"><pre>Error variant of INFERIOR-PROCESS-FAILED-CONDITION

See <a href="#CONDITION%20SIMPLE-INFERIORS%3AINFERIOR-PROCESS-FAILED-CONDITION" class="xref">INFERIOR-PROCESS-FAILED-CONDITION</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION SIMPLE-INFERIORS:INFERIOR-PROCESS-FAILED-WARNING"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20SIMPLE-INFERIORS%3AINFERIOR-PROCESS-FAILED-WARNING">INFERIOR-PROCESS-FAILED-WARNING</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-inferiors/blob/056ee771657112e79059b083a964d195976bb0b5/process.lisp#L169">Source</a>  </header> <div class="docstring"><pre>Warning variant of INFERIOR-PROCESS-FAILED-CONDITION

See <a href="#CONDITION%20SIMPLE-INFERIORS%3AINFERIOR-PROCESS-FAILED-CONDITION" class="xref">INFERIOR-PROCESS-FAILED-CONDITION</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION SIMPLE-INFERIORS:INVALID-LOCATION-ERROR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20SIMPLE-INFERIORS%3AINVALID-LOCATION-ERROR">INVALID-LOCATION-ERROR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/simple-inferiors/blob/056ee771657112e79059b083a964d195976bb0b5/process.lisp#L5">Source</a>  </header> <div class="docstring"><pre>Signalled if an attempt is made to change directory to a location that does not exist.

See <a href="#GENERIC-FUNCTION%20SIMPLE-INFERIORS%3ALOCATION" class="xref">LOCATION</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION SIMPLE-INFERIORS:COPY-STREAM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20SIMPLE-INFERIORS%3ACOPY-STREAM">COPY-STREAM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">INPUT</li>    <li class="argument">OUTPUT</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">CONSUME-ALL</li>    <li class="argument">BUFFER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-inferiors/blob/056ee771657112e79059b083a964d195976bb0b5/process.lisp#L68">Source</a>  </header> <div class="docstring"><pre>Copies data from INPUT to OUTPUT using the given BUFFER format.
If CONSUME-ALL is non-NIL, all data is read from INPUT until EOF is reached.

BUFFER can be one of
  (EQL :LINE)      =&gt; The stream is copied one line at a time.
  (EQL :CAHRACTER) =&gt; The stream is copied one character at a time.
  INTEGER          =&gt; A character buffer of size BUFFER is used.

Note that this function tries to be as non-blocking as possible if CONSUME-ALL is NIL.
This means that it will only copy anything if there is something to read, but might
also read more than one line, character, or buffer at a time, if more data is available.

Once nothing more can be copied, FINISH-OUTPUT on OUTPUT is called.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION SIMPLE-INFERIORS:ENSURE-COPIER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20SIMPLE-INFERIORS%3AENSURE-COPIER">ENSURE-COPIER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">COPIER-ISH</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-inferiors/blob/056ee771657112e79059b083a964d195976bb0b5/process.lisp#L148">Source</a>  </header> <div class="docstring"><pre>Ensures that COPIER-ISH is an actual function usable for copying streams.

COPIER-ISH can be one of
  FUNCTION =&gt; The function is used directly.
  INTEGER  =&gt; MAKE-COPIER is called with the COPIER-ISH.
  KEYWORD  =&gt; MAKE-COPIER is called with the COPIER-ISH.
  SYMBOL   =&gt; The function associated with the symbol is used.

The function must accept an INPUT and OUTPUT stream, as well as in the very least a keyword argument called CONSUME-ALL that, when non-NIL, will copy the whole INPUT to OUTPUT in one go until EOF is reached.

See <a href="#FUNCTION%20SIMPLE-INFERIORS%3AMAKE-COPIER" class="xref">MAKE-COPIER</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION SIMPLE-INFERIORS:HANDLE-PROCESS-PARALLEL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20SIMPLE-INFERIORS%3AHANDLE-PROCESS-PARALLEL">HANDLE-PROCESS-PARALLEL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">COPIER</li>    <li class="argument">PROCESS</li>    <li class="argument">OUT-IN</li>    <li class="argument">OUT-OUT</li>    <li class="argument">ERR-IN</li>    <li class="argument">ERR-OUT</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">STOP-ATTEMPTS</li>    <li class="argument">STOP-SLEEP</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-inferiors/blob/056ee771657112e79059b083a964d195976bb0b5/process.lisp#L134">Source</a>  </header> <div class="docstring"><pre>Handles the PROCESS using COPIER with the OUT-IN, OUT-OUT, ERR-IN, and ERR-OUT streams in parallel. For that, it opens two threads for the respective stream pairs that handle the copying and joins them with the initial thread on unwinding.

As all handlers, this is responsible for copying the data from the IN to the respective OUT streams as well as ensuring that the process is stopped and all remaining data is read on unwinding.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION SIMPLE-INFERIORS:HANDLE-PROCESS-SEQUENTIAL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20SIMPLE-INFERIORS%3AHANDLE-PROCESS-SEQUENTIAL">HANDLE-PROCESS-SEQUENTIAL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">COPIER</li>    <li class="argument">PROCESS</li>    <li class="argument">OUT-IN</li>    <li class="argument">OUT-OUT</li>    <li class="argument">ERR-IN</li>    <li class="argument">ERR-OUT</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">COOLDOWN</li>    <li class="argument">STOP-ATTEMPTS</li>    <li class="argument">STOP-SLEEP</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-inferiors/blob/056ee771657112e79059b083a964d195976bb0b5/process.lisp#L124">Source</a>  </header> <div class="docstring"><pre>Handles the PROCESS using COPIER with the OUT-IN, OUT-OUT, ERR-IN, and ERR-OUT streams sequentially.
Between copies, it will sleep for COOLDOWN seconds to make sure no excessive CPU is wasted trying to read repeatedly.

As all handlers, this is responsible for copying the data from the IN to the respective OUT streams as well as ensuring that the process is stopped and all remaining data is read on unwinding.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION SIMPLE-INFERIORS:MAKE-COPIER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20SIMPLE-INFERIORS%3AMAKE-COPIER">MAKE-COPIER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">BUFFER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-inferiors/blob/056ee771657112e79059b083a964d195976bb0b5/process.lisp#L144">Source</a>  </header> <div class="docstring"><pre>Creates a copier function that accepts an input and output stream as well as optional extra arguments using BUFFER.
This simply creates a wrapper lambda around COPY-STREAM.

See <a href="#FUNCTION%20SIMPLE-INFERIORS%3ACOPY-STREAM" class="xref">COPY-STREAM</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION SIMPLE-INFERIORS:RUN"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20SIMPLE-INFERIORS%3ARUN">RUN</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">PROGRAM</li>    <li class="argument">ARGS</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">INPUT</li>    <li class="argument">OUTPUT</li>    <li class="argument">ERROR</li>    <li class="argument">ON-NON-ZERO-EXIT</li>    <li class="argument">HANDLER</li>    <li class="argument">COPIER</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-inferiors/blob/056ee771657112e79059b083a964d195976bb0b5/process.lisp#L172">Source</a>  </header> <div class="docstring"><pre>Runs an inferior process, supplying PROGRAM with ARGS and using INPUT for STDIN, OUTPUT for STDOUT, and ERROR FOR STDERR.

The current *CWD* is resolved to an actual location, checked for validity, and then used as the location to start the process in. Depending on implementation support, this may have to fall back on using a manual chdir for launching the process.

HANDLER must be a function of six arguments:
  COPIER  =&gt; The function computed by ENSURE-COPIER on COPIER:
  PROCESS =&gt; The process object used by EXTERNAL-PROGRAM.
  OUT-IN  =&gt; The receiving STDOUT stream from the process.
  OUT-OUT =&gt; The outputting stream computed by WITH-RESOLVED-STREAM on OUTPUT.
  ERR-IN  =&gt; The receiving STDERR stream from the process.
  ERR-OUT =&gt; The outputting stream computed by WITH-RESOLVED-STREAM on ERROR.
The handler must ensure that the process is stopped and all data has been copied when an unwind takes place. Furthermore it should not return until the process is done.

ON-NON-ZERO-EXIT can be one of
  NIL     =&gt; NIL is returned.
  :RETURN =&gt; The exit code is returned.
  :ERROR  =&gt; A INFERIOR-PROCESS-FAILED-ERROR is signalled.
  :WARN   =&gt; A INFERIOR-PROCESS-FAILED-WARNING is signalled.

See <a href="#VARIABLE%20SIMPLE-INFERIORS%3A%2ACWD%2A" class="xref">*CWD*</a>
See <a href="#FUNCTION%20SIMPLE-INFERIORS%3AENSURE-COPIER" class="xref">ENSURE-COPIER</a>
See <a href="#FUNCTION%20SIMPLE-INFERIORS%3AHANDLE-PROCESS-SEQUENTIAL" class="xref">HANDLE-PROCESS-SEQUENTIAL</a>
See <a href="#FUNCTION%20SIMPLE-INFERIORS%3AHANDLE-PROCESS-PARALLEL" class="xref">HANDLE-PROCESS-PARALLEL</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-INFERIORS:FAILED-ARGS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-INFERIORS%3AFAILED-ARGS">FAILED-ARGS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONDITION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accesses the program arguments passed to RUN that failed to execute properly.

See <a href="#CONDITION%20SIMPLE-INFERIORS%3AINFERIOR-PROCESS-FAILED-CONDITION" class="xref">INFERIOR-PROCESS-FAILED-CONDITION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-INFERIORS:(SETF FAILED-ARGS)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-INFERIORS%3A%28SETF%20FAILED-ARGS%29">(SETF FAILED-ARGS)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">CONDITION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-INFERIORS:FAILED-EXIT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-INFERIORS%3AFAILED-EXIT">FAILED-EXIT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONDITION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accesses the exit code returned from the program that failed to execute properly in RUN.

See <a href="#CONDITION%20SIMPLE-INFERIORS%3AINFERIOR-PROCESS-FAILED-CONDITION" class="xref">INFERIOR-PROCESS-FAILED-CONDITION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-INFERIORS:(SETF FAILED-EXIT)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-INFERIORS%3A%28SETF%20FAILED-EXIT%29">(SETF FAILED-EXIT)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">CONDITION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-INFERIORS:FAILED-PROGRAM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-INFERIORS%3AFAILED-PROGRAM">FAILED-PROGRAM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONDITION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Accesses the program string passed to RUN that failed to execute properly.

See <a href="#CONDITION%20SIMPLE-INFERIORS%3AINFERIOR-PROCESS-FAILED-CONDITION" class="xref">INFERIOR-PROCESS-FAILED-CONDITION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-INFERIORS:(SETF FAILED-PROGRAM)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-INFERIORS%3A%28SETF%20FAILED-PROGRAM%29">(SETF FAILED-PROGRAM)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">CONDITION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-INFERIORS:LOCATION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-INFERIORS%3ALOCATION">LOCATION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">THING</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-inferiors/blob/056ee771657112e79059b083a964d195976bb0b5/process.lisp#L10">Source</a>  </header> <div class="docstring"><pre>Attempts to resolve the THING to a pathname.

THING can be one of
  NULL     =&gt; UIOP:GETCWD
  PATHNAME =&gt; THING
  STRING   =&gt; UIOP:PARSE-NATIVE-NAMESTRING

This generic function is intended to be extended with methods by the user to allow using objects as locations directly.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-INFERIORS:(SETF LOCATION)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-INFERIORS%3A%28SETF%20LOCATION%29">(SETF LOCATION)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">CONDITION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION SIMPLE-INFERIORS:VALID-LOCATION-P"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20SIMPLE-INFERIORS%3AVALID-LOCATION-P">VALID-LOCATION-P</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">THING</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-inferiors/blob/056ee771657112e79059b083a964d195976bb0b5/process.lisp#L18">Source</a>  </header> <div class="docstring"><pre>Checks whether THING is a valid (existing) location.

See <a href="#GENERIC-FUNCTION%20SIMPLE-INFERIORS%3ALOCATION" class="xref">LOCATION</a></pre></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION SIMPLE-INFERIORS:WITH-CHDIR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20SIMPLE-INFERIORS%3AWITH-CHDIR">WITH-CHDIR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <ul class="arguments"> <li class="argument">NEW-PATH</li>  <li class="argument lambda-list-keyword">&amp;REST</li> </ul>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-inferiors/blob/056ee771657112e79059b083a964d195976bb0b5/process.lisp#L27">Source</a>  </header> <div class="docstring"><pre>Changes the directory lazily.
This merges the passed NEW-PATH (resolved through LOCATION) with *CWD* (resolved through LOCATION) and binds that to *CWD*.

See <a href="#GENERIC-FUNCTION%20SIMPLE-INFERIORS%3ALOCATION" class="xref">LOCATION</a>
See <a href="#VARIABLE%20SIMPLE-INFERIORS%3A%2ACWD%2A" class="xref">*CWD*</a></pre></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION SIMPLE-INFERIORS:WITH-EXCHDIR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20SIMPLE-INFERIORS%3AWITH-EXCHDIR">WITH-EXCHDIR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <ul class="arguments"> <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>  <li class="argument">NEW-PATH</li>  <li class="argument lambda-list-keyword">&amp;REST</li> </ul>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/simple-inferiors/blob/056ee771657112e79059b083a964d195976bb0b5/process.lisp#L32">Source</a>  </header> <div class="docstring"><pre>Changes the directory directly.
If NEW-PATH is not passed, *CWD* is used instead. Either way it is resolved through LOCATION and checked by CHECK-LOCATION before the actual directory change is performed. This will /also/ act like WITH-CHDIR by additionally rebinding *CWD*.

Note that since a binary can only ever be in one directory at once, you should avoid using this unless necessary, or unless you are sure that the system is not paralellised.

See <a href="#GENERIC-FUNCTION%20SIMPLE-INFERIORS%3ALOCATION" class="xref">LOCATION</a>
See <a href="#FUNCTION%20SIMPLE-INFERIORS%3ACHECK-LOCATION" class="xref">CHECK-LOCATION</a>
See <a href="#VARIABLE%20SIMPLE-INFERIORS%3A%2ACWD%2A" class="xref">*CWD*</a></pre></div> </article> </li> </ul> </article> </li> </ul> </section>  </article> <script>window.addEventListener("DOMContentLoaded", function(){
    var unmarkElement = function(el){
        if(el.tagName === "mark" || el.tagName === "MARK"){
            [].forEach.call(el.childNodes, function(child){
                el.parentNode.insertBefore(child, el);
            });
            el.parentNode.removeChild(el);
        }else if(el.parentNode.tagName === "mark"){
            return unmarkElement(el.parentNode);
        }
        return null;
    }

    var unmarkAll = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("mark"), unmarkElement);
    }
    
    var markElement = function(el){
        if(el.parentNode.tagName === "mark" || el.parentNode.tagName === "MARK"){
            return el.parentNode;
        } else {
            unmarkAll();
            var marked = document.createElement("mark");
            el.parentNode.insertBefore(marked, el);
            marked.appendChild(el);
            return marked;
        }
    }

    var markFragmented = function(){
        if(window.location.hash){
            var el = document.getElementById(decodeURIComponent(window.location.hash.substr(1)));
            if(el) markElement(el);
        }
    }

    var registerXrefLink = function(link){
        var el = document.getElementById(decodeURIComponent(link.getAttribute("href").substr(1)));
        if(el){
            link.addEventListener("click", function(){
                markElement(el);
            });
        }
    }

    var registerXrefLinks = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("a.xref"), registerXrefLink);
    }

    markFragmented();
    registerXrefLinks();
}); </script> </body> </html> 